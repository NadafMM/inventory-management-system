


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > InventoryTransactionRepository</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.inventorymanagement.inventory.repository</a>
</div>

<h1>Coverage Summary for Class: InventoryTransactionRepository (com.inventorymanagement.inventory.repository)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
</tr>
  <tr>
    <td class="name">InventoryTransactionRepository$MockitoMock$TD65O0Ov</td>
  </tr>
  <tr>
    <td class="name">InventoryTransactionRepository$MockitoMock$TD65O0Ov$auxiliary$tZcp3iDf</td>
  </tr>
  <tr>
    <td class="name">InventoryTransactionRepository$MockitoMock$TD65O0Ov$auxiliary$uO8NGKvC</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.inventorymanagement.inventory.repository;
&nbsp;
&nbsp;import com.inventorymanagement.inventory.model.InventoryTransaction;
&nbsp;import com.inventorymanagement.inventory.model.InventoryTransaction.TransactionType;
&nbsp;import java.time.LocalDateTime;
&nbsp;import java.util.List;
&nbsp;import org.springframework.data.domain.Page;
&nbsp;import org.springframework.data.domain.Pageable;
&nbsp;import org.springframework.data.jpa.repository.JpaRepository;
&nbsp;import org.springframework.data.jpa.repository.Query;
&nbsp;import org.springframework.data.repository.query.Param;
&nbsp;import org.springframework.stereotype.Repository;
&nbsp;
&nbsp;/**
&nbsp; * Repository interface for InventoryTransaction entity. Provides transaction audit trail and
&nbsp; * inventory movement tracking functionality.
&nbsp; */
&nbsp;@Repository
&nbsp;public interface InventoryTransactionRepository extends JpaRepository&lt;InventoryTransaction, Long&gt; {
&nbsp;
&nbsp;  // ===== SKU-BASED QUERIES =====
&nbsp;
&nbsp;  /**
&nbsp;   * Finds all transactions for a specific SKU.
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @return list of transactions for the SKU
&nbsp;   */
&nbsp;  @Query(&quot;SELECT t FROM InventoryTransaction t WHERE t.sku.id = :skuId ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findBySkuId(@Param(&quot;skuId&quot;) Long skuId);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds all transactions for a specific SKU with pagination.
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @param pageable pagination information
&nbsp;   * @return page of transactions for the SKU
&nbsp;   */
&nbsp;  @Query(&quot;SELECT t FROM InventoryTransaction t WHERE t.sku.id = :skuId ORDER BY t.createdAt DESC&quot;)
&nbsp;  Page&lt;InventoryTransaction&gt; findBySkuId(@Param(&quot;skuId&quot;) Long skuId, Pageable pageable);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds all transactions for multiple SKUs.
&nbsp;   *
&nbsp;   * @param skuIds list of SKU IDs
&nbsp;   * @return list of transactions for the specified SKUs
&nbsp;   */
&nbsp;  @Query(&quot;SELECT t FROM InventoryTransaction t WHERE t.sku.id IN :skuIds ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findBySkuIdIn(@Param(&quot;skuIds&quot;) List&lt;Long&gt; skuIds);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds recent transactions for a specific SKU.
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @param limit maximum number of transactions to return
&nbsp;   * @return list of recent transactions
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.sku.id = :skuId ORDER BY t.createdAt DESC LIMIT :limit&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findRecentBySkuId(
&nbsp;      @Param(&quot;skuId&quot;) Long skuId, @Param(&quot;limit&quot;) int limit);
&nbsp;
&nbsp;  // ===== TRANSACTION TYPE QUERIES =====
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions by type.
&nbsp;   *
&nbsp;   * @param transactionType the transaction type
&nbsp;   * @return list of transactions with the specified type
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.transactionType = :transactionType ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findByTransactionType(
&nbsp;      @Param(&quot;transactionType&quot;) TransactionType transactionType);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions by type with pagination.
&nbsp;   *
&nbsp;   * @param transactionType the transaction type
&nbsp;   * @param pageable pagination information
&nbsp;   * @return page of transactions with the specified type
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.transactionType = :transactionType ORDER BY t.createdAt DESC&quot;)
&nbsp;  Page&lt;InventoryTransaction&gt; findByTransactionType(
&nbsp;      @Param(&quot;transactionType&quot;) TransactionType transactionType, Pageable pageable);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions by SKU and type.
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @param transactionType the transaction type
&nbsp;   * @return list of transactions for the SKU with the specified type
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.sku.id = :skuId AND t.transactionType = :transactionType ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findBySkuIdAndTransactionType(
&nbsp;      @Param(&quot;skuId&quot;) Long skuId, @Param(&quot;transactionType&quot;) TransactionType transactionType);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds stock increase transactions (IN and positive ADJUSTMENT).
&nbsp;   *
&nbsp;   * @return list of stock increase transactions
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE (t.transactionType = &#39;IN&#39; OR (t.transactionType = &#39;ADJUSTMENT&#39; AND t.quantity &gt; 0)) ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findStockIncreaseTransactions();
&nbsp;
&nbsp;  /**
&nbsp;   * Finds stock decrease transactions (OUT and negative ADJUSTMENT).
&nbsp;   *
&nbsp;   * @return list of stock decrease transactions
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE (t.transactionType = &#39;OUT&#39; OR (t.transactionType = &#39;ADJUSTMENT&#39; AND t.quantity &lt; 0)) ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findStockDecreaseTransactions();
&nbsp;
&nbsp;  // ===== DATE-BASED QUERIES =====
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions within a date range.
&nbsp;   *
&nbsp;   * @param startDate start date (inclusive)
&nbsp;   * @param endDate end date (inclusive)
&nbsp;   * @return list of transactions within the date range
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.createdAt BETWEEN :startDate AND :endDate ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findByCreatedAtBetween(
&nbsp;      @Param(&quot;startDate&quot;) LocalDateTime startDate, @Param(&quot;endDate&quot;) LocalDateTime endDate);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions within a date range with pagination.
&nbsp;   *
&nbsp;   * @param startDate start date (inclusive)
&nbsp;   * @param endDate end date (inclusive)
&nbsp;   * @param pageable pagination information
&nbsp;   * @return page of transactions within the date range
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.createdAt BETWEEN :startDate AND :endDate ORDER BY t.createdAt DESC&quot;)
&nbsp;  Page&lt;InventoryTransaction&gt; findByCreatedAtBetween(
&nbsp;      @Param(&quot;startDate&quot;) LocalDateTime startDate,
&nbsp;      @Param(&quot;endDate&quot;) LocalDateTime endDate,
&nbsp;      Pageable pageable);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions within a date range with pagination (alias for findByCreatedAtBetween).
&nbsp;   *
&nbsp;   * @param startDate start date (inclusive)
&nbsp;   * @param endDate end date (inclusive)
&nbsp;   * @param pageable pagination information
&nbsp;   * @return page of transactions within the date range
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.createdAt BETWEEN :startDate AND :endDate ORDER BY t.createdAt DESC&quot;)
&nbsp;  Page&lt;InventoryTransaction&gt; findByDateRange(
&nbsp;      @Param(&quot;startDate&quot;) LocalDateTime startDate,
&nbsp;      @Param(&quot;endDate&quot;) LocalDateTime endDate,
&nbsp;      Pageable pageable);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions after a specific date.
&nbsp;   *
&nbsp;   * @param date the date to search from
&nbsp;   * @return list of transactions after the date
&nbsp;   */
&nbsp;  @Query(&quot;SELECT t FROM InventoryTransaction t WHERE t.createdAt &gt; :date ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findByCreatedAtAfter(@Param(&quot;date&quot;) LocalDateTime date);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions for a SKU within a date range.
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @param startDate start date (inclusive)
&nbsp;   * @param endDate end date (inclusive)
&nbsp;   * @return list of transactions for the SKU within the date range
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.sku.id = :skuId AND t.createdAt BETWEEN :startDate AND :endDate ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findBySkuIdAndCreatedAtBetween(
&nbsp;      @Param(&quot;skuId&quot;) Long skuId,
&nbsp;      @Param(&quot;startDate&quot;) LocalDateTime startDate,
&nbsp;      @Param(&quot;endDate&quot;) LocalDateTime endDate);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions for a SKU within a date range with pagination.
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @param startDate start date (inclusive)
&nbsp;   * @param endDate end date (inclusive)
&nbsp;   * @param pageable pagination information
&nbsp;   * @return page of transactions for the SKU within the date range
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.sku.id = :skuId AND t.createdAt BETWEEN :startDate AND :endDate ORDER BY t.createdAt DESC&quot;)
&nbsp;  Page&lt;InventoryTransaction&gt; findBySkuIdAndCreatedAtBetween(
&nbsp;      @Param(&quot;skuId&quot;) Long skuId,
&nbsp;      @Param(&quot;startDate&quot;) LocalDateTime startDate,
&nbsp;      @Param(&quot;endDate&quot;) LocalDateTime endDate,
&nbsp;      Pageable pageable);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions for a SKU within a date range (alias for findBySkuIdAndCreatedAtBetween).
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @param startDate start date (inclusive)
&nbsp;   * @param endDate end date (inclusive)
&nbsp;   * @param pageable pagination information
&nbsp;   * @return page of transactions for the SKU within the date range
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.sku.id = :skuId AND t.createdAt BETWEEN :startDate AND :endDate ORDER BY t.createdAt DESC&quot;)
&nbsp;  Page&lt;InventoryTransaction&gt; findBySkuIdAndDateRange(
&nbsp;      @Param(&quot;skuId&quot;) Long skuId,
&nbsp;      @Param(&quot;startDate&quot;) LocalDateTime startDate,
&nbsp;      @Param(&quot;endDate&quot;) LocalDateTime endDate,
&nbsp;      Pageable pageable);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions for a SKU within a date range (alias for findBySkuIdAndCreatedAtBetween).
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @param startDate start date (inclusive)
&nbsp;   * @param endDate end date (inclusive)
&nbsp;   * @return list of transactions for the SKU within the date range
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.sku.id = :skuId AND t.createdAt BETWEEN :startDate AND :endDate ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findBySkuIdAndDateRange(
&nbsp;      @Param(&quot;skuId&quot;) Long skuId,
&nbsp;      @Param(&quot;startDate&quot;) LocalDateTime startDate,
&nbsp;      @Param(&quot;endDate&quot;) LocalDateTime endDate);
&nbsp;
&nbsp;  // ===== REFERENCE-BASED QUERIES =====
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions by reference ID.
&nbsp;   *
&nbsp;   * @param referenceId the reference ID
&nbsp;   * @return list of transactions with the specified reference ID
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.referenceId = :referenceId ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findByReferenceId(@Param(&quot;referenceId&quot;) String referenceId);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions by reference ID with pagination.
&nbsp;   *
&nbsp;   * @param referenceId the reference ID
&nbsp;   * @param pageable pagination information
&nbsp;   * @return page of transactions with the specified reference ID
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.referenceId = :referenceId ORDER BY t.createdAt DESC&quot;)
&nbsp;  Page&lt;InventoryTransaction&gt; findByReferenceId(
&nbsp;      @Param(&quot;referenceId&quot;) String referenceId, Pageable pageable);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions by reference type.
&nbsp;   *
&nbsp;   * @param referenceType the reference type
&nbsp;   * @return list of transactions with the specified reference type
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.referenceType = :referenceType ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findByReferenceType(@Param(&quot;referenceType&quot;) String referenceType);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions by reference ID and type.
&nbsp;   *
&nbsp;   * @param referenceId the reference ID
&nbsp;   * @param referenceType the reference type
&nbsp;   * @return list of transactions with the specified reference ID and type
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.referenceId = :referenceId AND t.referenceType = :referenceType ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findByReferenceIdAndReferenceType(
&nbsp;      @Param(&quot;referenceId&quot;) String referenceId, @Param(&quot;referenceType&quot;) String referenceType);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions performed by a specific user.
&nbsp;   *
&nbsp;   * @param performedBy the user who performed the transaction
&nbsp;   * @return list of transactions performed by the user
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.performedBy = :performedBy ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findByPerformedBy(@Param(&quot;performedBy&quot;) String performedBy);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions performed by a specific user with pagination.
&nbsp;   *
&nbsp;   * @param performedBy the user who performed the transaction
&nbsp;   * @param pageable pagination information
&nbsp;   * @return page of transactions performed by the user
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.performedBy = :performedBy ORDER BY t.createdAt DESC&quot;)
&nbsp;  Page&lt;InventoryTransaction&gt; findByPerformedBy(
&nbsp;      @Param(&quot;performedBy&quot;) String performedBy, Pageable pageable);
&nbsp;
&nbsp;  // ===== AGGREGATION QUERIES =====
&nbsp;
&nbsp;  /**
&nbsp;   * Calculates total quantity changes for a SKU.
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @return total quantity change (positive for net increase, negative for net decrease)
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT COALESCE(SUM(CASE WHEN t.transactionType = &#39;IN&#39; OR (t.transactionType = &#39;ADJUSTMENT&#39; AND t.quantity &gt; 0) THEN t.quantity WHEN t.transactionType = &#39;OUT&#39; OR (t.transactionType = &#39;ADJUSTMENT&#39; AND t.quantity &lt; 0) THEN -ABS(t.quantity) ELSE 0 END), 0) FROM InventoryTransaction t WHERE t.sku.id = :skuId&quot;)
&nbsp;  Long calculateTotalQuantityChangeBySkuId(@Param(&quot;skuId&quot;) Long skuId);
&nbsp;
&nbsp;  /**
&nbsp;   * Calculates total quantity changes for a SKU within a date range.
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @param startDate start date (inclusive)
&nbsp;   * @param endDate end date (inclusive)
&nbsp;   * @return total quantity change within the date range
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT COALESCE(SUM(CASE WHEN t.transactionType = &#39;IN&#39; OR (t.transactionType = &#39;ADJUSTMENT&#39; AND t.quantity &gt; 0) THEN t.quantity WHEN t.transactionType = &#39;OUT&#39; OR (t.transactionType = &#39;ADJUSTMENT&#39; AND t.quantity &lt; 0) THEN -ABS(t.quantity) ELSE 0 END), 0) FROM InventoryTransaction t WHERE t.sku.id = :skuId AND t.createdAt BETWEEN :startDate AND :endDate&quot;)
&nbsp;  Long calculateQuantityChangeBySkuIdAndDateRange(
&nbsp;      @Param(&quot;skuId&quot;) Long skuId,
&nbsp;      @Param(&quot;startDate&quot;) LocalDateTime startDate,
&nbsp;      @Param(&quot;endDate&quot;) LocalDateTime endDate);
&nbsp;
&nbsp;  /**
&nbsp;   * Counts transactions by SKU.
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @return number of transactions for the SKU
&nbsp;   */
&nbsp;  @Query(&quot;SELECT COUNT(t) FROM InventoryTransaction t WHERE t.sku.id = :skuId&quot;)
&nbsp;  long countBySkuId(@Param(&quot;skuId&quot;) Long skuId);
&nbsp;
&nbsp;  /**
&nbsp;   * Counts transactions by type.
&nbsp;   *
&nbsp;   * @param transactionType the transaction type
&nbsp;   * @return number of transactions with the specified type
&nbsp;   */
&nbsp;  @Query(&quot;SELECT COUNT(t) FROM InventoryTransaction t WHERE t.transactionType = :transactionType&quot;)
&nbsp;  long countByTransactionType(@Param(&quot;transactionType&quot;) TransactionType transactionType);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transaction summary by SKU (grouped by transaction type).
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @return list of transaction type and count pairs
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t.transactionType, COUNT(t), COALESCE(SUM(ABS(t.quantity)), 0) FROM InventoryTransaction t WHERE t.sku.id = :skuId GROUP BY t.transactionType ORDER BY t.transactionType&quot;)
&nbsp;  List&lt;Object[]&gt; findTransactionSummaryBySkuId(@Param(&quot;skuId&quot;) Long skuId);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds daily transaction summary within a date range.
&nbsp;   *
&nbsp;   * @param startDate start date (inclusive)
&nbsp;   * @param endDate end date (inclusive)
&nbsp;   * @return list of date, transaction type, and count
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT DATE(t.createdAt), t.transactionType, COUNT(t), COALESCE(SUM(ABS(t.quantity)), 0) FROM InventoryTransaction t WHERE t.createdAt BETWEEN :startDate AND :endDate GROUP BY DATE(t.createdAt), t.transactionType ORDER BY DATE(t.createdAt) DESC, t.transactionType&quot;)
&nbsp;  List&lt;Object[]&gt; findDailyTransactionSummary(
&nbsp;      @Param(&quot;startDate&quot;) LocalDateTime startDate, @Param(&quot;endDate&quot;) LocalDateTime endDate);
&nbsp;
&nbsp;  // ===== BUSINESS LOGIC QUERIES =====
&nbsp;
&nbsp;  /**
&nbsp;   * Finds all distinct reference types.
&nbsp;   *
&nbsp;   * @return list of distinct reference types
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT DISTINCT t.referenceType FROM InventoryTransaction t WHERE t.referenceType IS NOT NULL ORDER BY t.referenceType&quot;)
&nbsp;  List&lt;String&gt; findAllDistinctReferenceTypes();
&nbsp;
&nbsp;  /**
&nbsp;   * Finds all distinct users who performed transactions.
&nbsp;   *
&nbsp;   * @return list of distinct users
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT DISTINCT t.performedBy FROM InventoryTransaction t WHERE t.performedBy IS NOT NULL ORDER BY t.performedBy&quot;)
&nbsp;  List&lt;String&gt; findAllDistinctPerformedBy();
&nbsp;
&nbsp;  /**
&nbsp;   * Finds the most recent transaction for a SKU.
&nbsp;   *
&nbsp;   * @param skuId the SKU ID
&nbsp;   * @return the most recent transaction for the SKU
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE t.sku.id = :skuId ORDER BY t.createdAt DESC LIMIT 1&quot;)
&nbsp;  InventoryTransaction findMostRecentBySkuId(@Param(&quot;skuId&quot;) Long skuId);
&nbsp;
&nbsp;  /**
&nbsp;   * Finds transactions with specific reason.
&nbsp;   *
&nbsp;   * @param reason the transaction reason
&nbsp;   * @return list of transactions with the specified reason
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE LOWER(t.reason) LIKE LOWER(CONCAT(&#39;%&#39;, :reason, &#39;%&#39;)) ORDER BY t.createdAt DESC&quot;)
&nbsp;  List&lt;InventoryTransaction&gt; findByReasonContainingIgnoreCase(@Param(&quot;reason&quot;) String reason);
&nbsp;
&nbsp;  /**
&nbsp;   * Advanced search with multiple criteria.
&nbsp;   *
&nbsp;   * @param skuId SKU filter (null to ignore)
&nbsp;   * @param transactionType transaction type filter (null to ignore)
&nbsp;   * @param referenceId reference ID filter (null to ignore)
&nbsp;   * @param referenceType reference type filter (null to ignore)
&nbsp;   * @param performedBy user filter (null to ignore)
&nbsp;   * @param startDate start date filter (null to ignore)
&nbsp;   * @param endDate end date filter (null to ignore)
&nbsp;   * @param pageable pagination information
&nbsp;   * @return page of matching transactions
&nbsp;   */
&nbsp;  @Query(
&nbsp;      &quot;SELECT t FROM InventoryTransaction t WHERE &quot;
&nbsp;          + &quot;(:skuId IS NULL OR t.sku.id = :skuId) AND &quot;
&nbsp;          + &quot;(:transactionType IS NULL OR t.transactionType = :transactionType) AND &quot;
&nbsp;          + &quot;(:referenceId IS NULL OR t.referenceId = :referenceId) AND &quot;
&nbsp;          + &quot;(:referenceType IS NULL OR t.referenceType = :referenceType) AND &quot;
&nbsp;          + &quot;(:performedBy IS NULL OR t.performedBy = :performedBy) AND &quot;
&nbsp;          + &quot;(:startDate IS NULL OR t.createdAt &gt;= :startDate) AND &quot;
&nbsp;          + &quot;(:endDate IS NULL OR t.createdAt &lt;= :endDate) &quot;
&nbsp;          + &quot;ORDER BY t.createdAt DESC&quot;)
&nbsp;  Page&lt;InventoryTransaction&gt; findWithFilters(
&nbsp;      @Param(&quot;skuId&quot;) Long skuId,
&nbsp;      @Param(&quot;transactionType&quot;) TransactionType transactionType,
&nbsp;      @Param(&quot;referenceId&quot;) String referenceId,
&nbsp;      @Param(&quot;referenceType&quot;) String referenceType,
&nbsp;      @Param(&quot;performedBy&quot;) String performedBy,
&nbsp;      @Param(&quot;startDate&quot;) LocalDateTime startDate,
&nbsp;      @Param(&quot;endDate&quot;) LocalDateTime endDate,
&nbsp;      Pageable pageable);
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-07-19 20:52</div>
</div>
</body>
</html>
